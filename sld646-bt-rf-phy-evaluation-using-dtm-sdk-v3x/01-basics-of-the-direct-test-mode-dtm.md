# Basics of the Direct Test Mode (DTM)

The Bluetooth specification defines a mechanism, called Direct Test Mode (DTM), for testing the radio performance of Bluetooth low energy devices. This mechanism is described in the Bluetooth Core Specification, for example versions 4.2 or 5.2, Volume 6, Part F, which are available at [Bluetooth Core Specification](https://www.bluetooth.com/specifications/bluetooth-core-specification). DTM is provided for the validation of a Bluetooth low energy device’s radio-frequency (RF) physical layer (PHY), so as to ultimately guarantee an end product’s interoperability and performance quality. RF testing is essential for a Bluetooth device, as with any device implementing a wireless standardized technology, since factors such as full compliance with the specification for interoperability, and conformance to communication regulations must be carefully assessed and validated before the product is launched. In addition, it may be desirable to evaluate the product’s performance during production. The ability to easily accomplish RF testing in a standardized manner throughout the production cycle is useful.

DTM offers two approaches for RF PHY testing. In the first, an *Upper Tester* can enter special HCI (host control interface) commands over the standardized HCI interface of the Device Under Test (DUT) to start and stop the radio tests on the DUT. In the second, the Upper Tester has direct access to the DUT through a dedicated 2-wire connection and can autonomously start and stop the radio tests on the DUT in accordance with automated test routines.

The DTM protocol enabling the communication between the DUT and the Upper Tester also has provisions for feedback from the DUT, in the form of acknowledgements to the commands given, or in the form of Packet Count information being reported at the time a test is stopped.

A *Lower Tester*, or RF PHY Tester, is also part of the test setup, and is the actual lab equipment measuring the RF activity and performance. The RF PHY Tester can either be a separate device, like a spectrum analyzer, which is normally used with the first method where the HCI commands are issued by a generic host system, or it can be part of the same device. In the latter case the RF PHY Tester functions also as the Upper Tester, as for example commercial Bluetooth testers such as the one referenced later in this document.

The Bluetooth-enabled Silicon Labs EFR32xG SoCs and the BGM/MGM modules support both the approaches mentioned above. Special firmware can be loaded to enable the 2-wire DTM and allow the Upper Tester to take full control of the SoC or module (the device). The 2-wire link is a UART-like connection with no flow control operating at baud rates between 1200-115200, 8N1 (8 data bits, no parity, 1 stop bit). As one alternative, firmware that configures the device to operate in Network Co-Processor (NCP) mode can be used, since the host system can then issue the test commands included with the BGAPI Bluetooth API over the same host interface that is normally used to implement the BGAPI protocol for the control and configuration of the device’s normal Bluetooth LE functionality. Note that in this case BGAPI-formatted test commands are sent and not the HCI commands defined in the standard. However, these BGAPI commands are then internally processed as HCI commands. The SDK does not contain any special firmware or configuration to disable the BGAPI DTM commands/responses and use the raw HCI command/responses instead.
